schema: '2.0'
stages:
  prepare:
    cmd: python3 data/data_preparation.py
    deps:
    - path: data/data_preparation.py
      md5: d71fdf5403905f3cf6ae9cd8b437c98c
      size: 1416
    - path: data/raw_data.csv
      md5: 1e5233e3b44398c514a86296241d298f
      size: 4223829
    params:
      params.yaml:
        prepare.test_size: 0.2
        prepare.undersampling: 0.75
        prepare.val_size: 0.2
    outs:
    - path: holdout.csv
      md5: 2dcf7bb5a52f68f8cf470f43209d61f1
      size: 881407
    - path: train.csv
      md5: 284a62ed9b966f463bcbc8b8a0bef6df
      size: 2114920
    - path: val.csv
      md5: 28af9e2980ea99960b32e2f8eac03392
      size: 704618
  train:
    cmd: python3 model/model_training.py
    deps:
    - path: model/model_training.py
      md5: de2a654f4b1b8a03dbf4bb95e1056a0d
      size: 2791
    - path: train.csv
      md5: 284a62ed9b966f463bcbc8b8a0bef6df
      size: 2114920
    - path: val.csv
      md5: 28af9e2980ea99960b32e2f8eac03392
      size: 704618
    params:
      params.yaml:
        train.criterion: gini
        train.max_depth: 4
        train.min_sample_leaf: 10
        train.n_estimators: 100
    outs:
    - path: metrics.json
      md5: d73a49d54a6fdfb70b0a7ddcf839d26c
      size: 528
    - path: model.pkl
      md5: a1525376e60b9547a8190a74c7acd57c
      size: 182771
  test:
    cmd: python3 -m pytest
    deps:
    - path: holdout.csv
      md5: 2dcf7bb5a52f68f8cf470f43209d61f1
      size: 881407
    - path: test/test_data_and_model.py
      md5: 9fbe39453ff5d6901d65b0f8d1cde8bf
      size: 2408
    outs:
    - path: prc.json
      md5: a9b3911c75edb53347e2c37783176975
      size: 136578
